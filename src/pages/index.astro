---
import '../styles/global.css'
import ResearchAgentUI from '../components/ResearchAgentUI.astro'
import AIServiceSelector from '../components/AIServiceSelector.astro'
import SearchConfigPanel from '../components/SearchConfigPanel.astro'
---

<!DOCTYPE html>
<html lang="zh-CN" class="h-full">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Deep Research Agent · Steady Research Pro</title>
		<meta name="description" content="Deep Research Agent - 多源聚合智能研究界面" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
	</head>
	<body class="min-h-screen bg-slate-950 text-slate-100 antialiased">
		<div class="flex min-h-screen">
			<aside class="w-72 bg-slate-950/80 border-r border-white/5 px-6 py-10 backdrop-blur">
				<div class="mb-10">
					<h1 class="text-xl font-semibold text-white">Steady Research Pro</h1>
					<p class="text-sm text-slate-400 mt-1">Deep Research Agent Suite</p>
				</div>
				<nav class="space-y-2">
					<button type="button" class="sidebar-link" data-target="research">
						<span class="indicator"></span>
						<span class="text">Research 仪表盘</span>
					</button>
					<button type="button" class="sidebar-link" data-target="settings">
						<span class="indicator"></span>
						<span class="text">Settings 设置</span>
					</button>
				</nav>
			</aside>
			<main class="flex-1 bg-gradient-to-br from-slate-900 via-slate-950 to-black">
				<div class="max-w-6xl mx-auto px-8 py-10 space-y-12">
					<section class="page-panel space-y-8" data-page="research">
						<ResearchAgentUI />
					</section>
					<section class="page-panel space-y-8 hidden" data-page="settings">
						<AIServiceSelector />
						<SearchConfigPanel />
					</section>
					<footer class="pt-6 text-center text-xs text-slate-500">© 2025 Steady Research Pro · UI 基于 Tailwind + HyperUI 风格</footer>
				</div>
			</main>
		</div>

		<script>
			// @ts-nocheck
			const activatePage = (page) => {
				const panels = document.querySelectorAll('.page-panel');
				panels.forEach((panel) => {
					panel.classList.toggle('hidden', panel.dataset.page !== page);
				});

				const links = document.querySelectorAll('.sidebar-link');
				links.forEach((link) => {
					const active = link.dataset.target === page;
					link.dataset.active = active ? 'true' : 'false';
				});
			};

			const initSidebarNav = () => {
				const links = document.querySelectorAll('.sidebar-link');
				links.forEach((link) => {
					link.addEventListener('click', () => activatePage(link.dataset.target));
				});

				activatePage('research');
			};

			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', initSidebarNav);
			} else {
				initSidebarNav();
			}
		</script>

		<style>
			.sidebar-link {
				display: flex;
				align-items: center;
				gap: 12px;
				width: 100%;
				padding: 12px 16px;
				border-radius: 14px;
				border: none;
				background: transparent;
				color: rgba(226, 232, 240, 0.7);
				font-size: 0.95rem;
				font-weight: 500;
				cursor: pointer;
				transition: all 0.2s ease;
			}

			.sidebar-link .indicator {
				display: inline-block;
				width: 6px;
				height: 6px;
				border-radius: 999px;
				background: transparent;
				transition: inherit;
			}

			.sidebar-link[data-active='true'] {
				background: linear-gradient(135deg, rgba(130, 197, 255, 0.2), rgba(79, 70, 229, 0.35));
				color: #e0f2fe;
				box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.35);
			}

			.sidebar-link[data-active='true'] .indicator {
				background: #38bdf8;
				box-shadow: 0 0 8px rgba(56, 189, 248, 0.4);
			}

			.sidebar-link[data-active='false'] .indicator {
				background: rgba(148, 163, 184, 0.4);
			}

			.sidebar-link[data-active='false']:hover {
				background: rgba(255, 255, 255, 0.08);
				color: rgba(226, 232, 240, 0.95);
			}

			.sidebar-link[data-active='false']:hover .indicator {
				background: rgba(96, 165, 250, 0.5);
			}
		</style>
	</body>
</html>
