/* empty css                                 */
import { e as createComponent, m as maybeRenderHead, k as renderScript, r as renderTemplate, l as renderComponent, f as createAstro, n as renderHead, h as addAttribute } from '../chunks/astro/server_iI-_1fr6.mjs';
import 'clsx';
export { renderers } from '../renderers.mjs';

const $$SidePanel = createComponent(async ($$result, $$props, $$slots) => {
  return renderTemplate`${maybeRenderHead()}<aside class="w-full lg:w-80 flex-shrink-0 space-y-6" id="side-panel" data-i18n-scope="sidePanel"> <div class="glass-card rounded-2xl border border-white/12 px-5 py-6 text-slate-200"> <h2 class="text-sm font-semibold tracking-[0.28em] text-slate-300 uppercase" data-i18n="sidePanel.title">
AI 研究配置
</h2> <form class="mt-4 space-y-4" id="config-form"> <div> <label class="block text-xs font-medium text-slate-300 mb-1" data-i18n="sidePanel.topicLabel">研究主题</label> <input id="research-topic" type="text" class="w-full rounded-xl border border-white/10 bg-slate-900/60 px-3 py-2.5 text-sm text-slate-100 placeholder:text-slate-500 focus:border-brand-300 focus:ring-2 focus:ring-brand-400/60" data-i18n-attrPlaceholder="sidePanel.topicPlaceholder" placeholder="例如：大语言模型在教育领域的应用"> </div> <div> <label class="block text-xs font-medium text-slate-300 mb-1" data-i18n="sidePanel.modelLabel">选择 AI 模型</label> <select id="research-model" class="w-full rounded-xl border border-white/10 bg-slate-900/60 px-3 py-2.5 text-sm text-slate-100 focus:border-brand-300 focus:ring-2 focus:ring-brand-400/60"> <option value="" data-i18n="sidePanel.modelLoading">加载中...</option> </select> <p id="provider-hint" class="mt-1 text-[11px] text-slate-400" data-i18n="sidePanel.modelConfigHint">
使用 Settings 页面的当前服务配置
</p> </div> <div> <label class="block text-xs font-medium text-slate-300 mb-1" data-i18n="sidePanel.depthLabel">深度级别</label> <select id="depth-level" class="w-full rounded-xl border border-white/10 bg-slate-900/60 px-3 py-2.5 text-sm text-slate-100 focus:border-brand-300 focus:ring-2 focus:ring-brand-400/60"> <option value="basic" data-i18n="sidePanel.depthBasic">基础分析</option> <option value="standard" selected data-i18n="sidePanel.depthStandard">标准研究</option> <option value="deep" data-i18n="sidePanel.depthDeep">深度研究</option> </select> </div> <div> <label class="block text-xs font-medium text-slate-300 mb-1" data-i18n="sidePanel.focusLabel">研究重点</label> <textarea id="research-focus" rows="2" class="w-full rounded-xl border border-white/10 bg-slate-900/60 px-3 py-2.5 text-sm text-slate-100 placeholder:text-slate-500 focus:border-brand-300 focus:ring-2 focus:ring-brand-400/60" data-i18n-attrPlaceholder="sidePanel.focusPlaceholder" placeholder="描述特定的研究角度或关注点..."></textarea> <li class="before:content-[''] before:absolute before:-start-4 before:top-1.5 before:w-2 before:h-2 before:rounded-full before:\${statusClass} relative" data-step="\${step.id}"> <div class="flex items-center justify-between pt-2"> <button type="button" id="stop-btn" class="items-center gap-1.5 rounded-full bg-red-500/90 px-3.5 py-2 text-xs font-semibold text-white shadow hover:bg-red-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500/70 hidden" data-i18n="sidePanel.stop"> <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 10h6v4H9z"></path></svg>
停止
</button> <button id="start-btn" type="submit" class="inline-flex items-center gap-1.5 rounded-full bg-gradient-to-r from-emerald-400/85 via-brand-400/80 to-sky-500/75 px-4 py-2 text-xs font-semibold text-slate-900 shadow hover:from-emerald-300 hover:to-sky-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-400/60" data-i18n="sidePanel.start"> <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
开始 AI 研究
</button> </div> </li> </div> <div class="glass-card glass-card--muted rounded-2xl border border-white/12 px-5 py-6" id="progress-card"> <h3 class="text-sm font-semibold tracking-[0.28em] text-slate-300 uppercase mb-4" data-i18n="sidePanel.progressTitle">
进度
</h3> <div class="mb-4"> <div class="h-1.5 w-full overflow-hidden rounded-full border border-white/10 bg-white/10 relative"> <div id="progress-bar" class="h-full w-0 bg-gradient-to-r from-brand-300 via-brand-400 to-sky-400 transition-all duration-500 ease-out"></div> <div class="absolute inset-0 bg-[linear-gradient(110deg,rgba(255,255,255,0)_0%,rgba(255,255,255,.6)_40%,rgba(255,255,255,0)_70%)] animate-shimmer pointer-events-none mix-blend-overlay"></div> </div> <div id="progress-meta" class="mt-1 text-[10px] font-medium tracking-wide text-slate-300/80 select-none" data-i18n="sidePanel.progressIdle">
0% · 等待开始
</div> </div> <ol id="progress-timeline" class="relative ms-4 space-y-5 text-slate-200/85" aria-live="polite"></ol> </div> </form> ${renderScript($$result, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/components/agent/SidePanel.astro?astro&type=script&index=0&lang.ts")} </div> </aside>`;
}, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/components/agent/SidePanel.astro", void 0);

const $$ResultsGrid = createComponent(($$result, $$props, $$slots) => {
  return renderTemplate`${maybeRenderHead()}<div id="results-grid" class="grid gap-5 md:grid-cols-2 xl:grid-cols-3"> <div id="results-empty" class="relative overflow-hidden rounded-2xl border border-white/10 bg-slate-900/55 p-6 shadow-soft animate-fade-in"> <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(45,212,191,0.2),_transparent_65%)] opacity-40"></div> <div class="relative space-y-2 text-xs text-slate-200/80"> <p class="text-sm font-semibold text-white/90" data-i18n="resultsGrid.placeholderTitle">
等待研究结果
</p> <p class="leading-relaxed" data-i18n="resultsGrid.placeholderDescription">
启动研究后，这里将实时展示生成的计划、搜索洞察、结构化模型与最终报告。
</p> <p class="text-[11px] text-slate-400/90" data-i18n="resultsGrid.placeholderHint">
提示：可在 Settings 中开启深度代理以获得更丰富的推理结果。
</p> </div> </div> </div>`;
}, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/components/agent/ResultsGrid.astro", void 0);

const $$ResearchAgentUI = createComponent(($$result, $$props, $$slots) => {
  return renderTemplate`${maybeRenderHead()}<section class="min-h-screen flex flex-col lg:flex-row gap-6"> ${renderComponent($$result, "SidePanel", $$SidePanel, {})} <div class="flex-1 space-y-6"> <div class="relative overflow-hidden rounded-2xl glass-card border border-white/10 px-6 py-8 md:px-8 md:py-9 text-slate-100"> <span class="card-accent-gradient"></span> <div class="relative z-10 flex flex-col gap-6 lg:flex-row lg:items-center"> <div class="flex-1 space-y-4"> <span class="badge-soft" data-i18n="hero.realtimeBadge">Realtime orchestration</span> <div class="space-y-2"> <h1 class="text-3xl font-semibold tracking-tight" data-i18n="hero.title">
Deep Research Agent
</h1> <p class="text-sm text-slate-200/80 max-w-xl" data-i18n="hero.description">
智能聚合多源信息，驱动可视化推理与搜索日志。通过事件总线与流式后端协作，实现由浅到深的洞察生成。
</p> </div> <div class="flex flex-wrap gap-2 text-[11px] text-slate-200/80"> <span class="inline-flex items-center gap-1.5 rounded-full border border-white/10 bg-white/5 px-3 py-1" data-i18n="hero.capabilitySse">⚡ SSE 推理</span> <span class="inline-flex items-center gap-1.5 rounded-full border border-white/10 bg-white/5 px-3 py-1" data-i18n="hero.capabilitySearch">🔎 多源搜索</span> <span class="inline-flex items-center gap-1.5 rounded-full border border-white/10 bg-white/5 px-3 py-1" data-i18n="hero.capabilityTimeline">🧭 时间线追踪</span> <span class="inline-flex items-center gap-1.5 rounded-full border border-white/10 bg-white/5 px-3 py-1" data-i18n="hero.capabilityReport">🗂️ 聚合报告</span> </div> </div> <dl class="grid grid-cols-2 gap-4 lg:w-72"> <div class="rounded-xl border border-white/10 bg-white/5 p-4"> <dt class="text-[10px] uppercase tracking-[0.28em] text-slate-400" data-i18n="hero.currentTask">
当前任务
</dt> <dd id="current-task-value" class="mt-2 text-2xl font-semibold text-white" data-i18n="hero.currentTaskIdle">
Idle
</dd> <dd class="mt-1 text-[11px] text-slate-300/80" data-i18n="hero.currentTaskHint">
等待研究主题
</dd> </div> <div class="rounded-xl border border-white/10 bg-white/5 p-4"> <dt class="text-[10px] uppercase tracking-[0.28em] text-slate-400" data-i18n="hero.latestOutput">
最新输出
</dt> <dd id="latest-output-value" class="mt-2 text-2xl font-semibold text-white">—</dd> <dd class="mt-1 text-[11px] text-slate-300/80" data-i18n="hero.latestOutputHint">
最近一次完成时间
</dd> </div> </dl> </div> </div> <div class="grid gap-4 md:grid-cols-3"> <div class="glass-card glass-card--muted rounded-2xl border border-white/10 px-4 py-5 text-xs text-slate-200/85"> <p class="text-sm font-semibold text-white/90" data-i18n="hero.quickStartTitle">
🎯 快速开始
</p> <p class="mt-2 leading-relaxed" data-i18n="hero.quickStartDescription">
在左侧填写主题并选择模型，系统将自动规整研究流程并同步推理轨迹。
</p> </div> <div class="glass-card glass-card--muted rounded-2xl border border-white/10 px-4 py-5 text-xs text-slate-200/85"> <p class="text-sm font-semibold text-white/90" data-i18n="hero.staySyncedTitle">
🔁 保持同步
</p> <p class="mt-2 leading-relaxed" data-i18n="hero.staySyncedDescription">
Settings 中切换服务后，SidePanel 会自动刷新可用模型列表并提示联机状态。
</p> </div> <div class="glass-card glass-card--muted rounded-2xl border border-white/10 px-4 py-5 text-xs text-slate-200/85"> <p class="text-sm font-semibold text-white/90" data-i18n="hero.exportTitle">📦 导出结果</p> <p class="mt-2 leading-relaxed" data-i18n="hero.exportDescription">
完成后可在结果卡片中扩展详情，整理结构化结论与引用来源。
</p> </div> </div> <div id="reasoning-panel" class="rounded-2xl border border-brand-300/35 bg-slate-900/55 px-5 py-4 space-y-3 text-xs text-slate-200/80 backdrop-blur hidden animate-fade-in"> <h2 class="text-xs font-semibold tracking-wide text-brand-200 flex items-center gap-1 uppercase" data-i18n="hero.reasoningTitle"> <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6l4 2"></path></svg>
推理轨迹
</h2> <ol id="reasoning-steps" class="space-y-2"></ol> </div> <div id="search-log" class="rounded-2xl border border-white/10 bg-slate-900/55 px-5 py-4 hidden text-[11px] leading-relaxed space-y-1 font-mono text-slate-200/70 overflow-auto max-h-56 backdrop-blur"></div> ${renderComponent($$result, "ResultsGrid", $$ResultsGrid, {})} </div> </section> ${renderScript($$result, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/components/ResearchAgentUI.astro?astro&type=script&index=0&lang.ts")}`;
}, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/components/ResearchAgentUI.astro", void 0);

const $$AIServiceSelector = createComponent(async ($$result, $$props, $$slots) => {
  return renderTemplate`${maybeRenderHead()}<div class="settings-panel ai-service-panel" data-i18n-scope="aiService" data-astro-cid-doccxbbm> <header class="panel-header" data-astro-cid-doccxbbm> <div class="header-meta" data-astro-cid-doccxbbm> <span class="badge-soft" data-i18n="aiService.badge" data-astro-cid-doccxbbm>AI Routing</span> <div class="title" data-astro-cid-doccxbbm> <h3 data-i18n="aiService.title" data-astro-cid-doccxbbm>AI 服务接入</h3> <p data-i18n="aiService.description" data-astro-cid-doccxbbm>集中管理并测试各类模型提供商的访问配置</p> </div> </div> <div class="current-selection" data-astro-cid-doccxbbm> <span data-i18n="aiService.current" data-astro-cid-doccxbbm>当前服务</span> <strong id="currentSelection" data-i18n="aiService.currentDefault" data-astro-cid-doccxbbm>本地Ollama</strong> </div> </header> <p class="panel-subtitle" id="selectionDetails" data-i18n="aiService.currentDetails" data-astro-cid-doccxbbm>
使用本地Ollama服务进行AI对话
</p> <div class="field-group" data-astro-cid-doccxbbm> <label for="aiProvider" data-i18n="aiService.selectLabel" data-astro-cid-doccxbbm>选择 AI 服务提供商</label> <select id="aiProvider" class="input-control" data-astro-cid-doccxbbm> <option value="ollama" data-i18n="aiService.optionOllama" data-astro-cid-doccxbbm>本地Ollama</option> <option value="deepseek" data-i18n="aiService.optionDeepseek" data-astro-cid-doccxbbm>DeepSeek</option> <option value="openai" data-i18n="aiService.optionOpenai" data-astro-cid-doccxbbm>OpenAI</option> <option value="claude" data-i18n="aiService.optionClaude" data-astro-cid-doccxbbm>Claude (Anthropic)</option> <option value="gemini" data-i18n="aiService.optionGemini" data-astro-cid-doccxbbm>Google Gemini</option> </select> </div> <div class="config-grid" data-astro-cid-doccxbbm> <section id="ollamaConfig" class="config-card" data-astro-cid-doccxbbm> <header class="config-card__header" data-astro-cid-doccxbbm> <div data-astro-cid-doccxbbm> <h4 data-i18n="aiService.localTitle" data-astro-cid-doccxbbm>本地 Ollama 服务</h4> <p data-i18n="aiService.localDescription" data-astro-cid-doccxbbm>无需 API 密钥，直接连接本地部署模型</p> </div> <span id="ollamaStatus" class="status-badge" data-tone="idle" data-i18n="aiService.statusDisconnected" data-astro-cid-doccxbbm>未连接</span> </header> <div class="config-card__body" data-astro-cid-doccxbbm> <div class="field" data-astro-cid-doccxbbm> <label for="ollamaUrl" data-i18n="aiService.urlLabel" data-astro-cid-doccxbbm>服务地址</label> <input type="text" id="ollamaUrl" class="input-control" value="http://localhost:11434" data-astro-cid-doccxbbm> </div> <div class="field" data-astro-cid-doccxbbm> <label for="ollamaModel" data-i18n="aiService.modelLabel" data-astro-cid-doccxbbm>首选模型</label> <select id="ollamaModel" class="input-control" data-astro-cid-doccxbbm> <option value="" data-i18n="aiService.modelLoading" data-astro-cid-doccxbbm>加载中...</option> </select> </div> <div class="field field--deep-agent" data-provider="ollama" data-astro-cid-doccxbbm> <div class="deep-agent-header" data-astro-cid-doccxbbm> <span class="deep-agent-title" data-i18n="aiService.deepAgentTitle" data-astro-cid-doccxbbm>深度代理模型映射</span> <label class="deep-agent-toggle" data-astro-cid-doccxbbm> <input type="checkbox" id="ollamaDeepAgentEnabled" data-astro-cid-doccxbbm> <span data-i18n="aiService.deepAgentToggle" data-astro-cid-doccxbbm>启用针对该服务的深度代理</span> </label> </div> <div class="deep-agent-grid" id="ollamaDeepAgentGrid" data-astro-cid-doccxbbm> <div class="deep-agent-item" data-astro-cid-doccxbbm> <span data-i18n="aiService.deepAgentSearch" data-astro-cid-doccxbbm>搜索阶段</span> <select id="ollamaDeepAgentSearch" class="input-control" data-astro-cid-doccxbbm></select> </div> <div class="deep-agent-item" data-astro-cid-doccxbbm> <span data-i18n="aiService.deepAgentModeling" data-astro-cid-doccxbbm>建模阶段</span> <select id="ollamaDeepAgentModeling" class="input-control" data-astro-cid-doccxbbm></select> </div> <div class="deep-agent-item" data-astro-cid-doccxbbm> <span data-i18n="aiService.deepAgentReport" data-astro-cid-doccxbbm>报告阶段</span> <select id="ollamaDeepAgentReport" class="input-control" data-astro-cid-doccxbbm></select> </div> </div> <p class="deep-agent-hint" id="ollamaDeepAgentHint" data-i18n="aiService.deepAgentHint" data-astro-cid-doccxbbm>
留空将沿用上方选择的默认模型。
</p> </div> </div> <footer class="config-card__footer" data-astro-cid-doccxbbm> <button id="testOllama" class="action-button" data-i18n="aiService.testButton" data-astro-cid-doccxbbm>测试连接</button> </footer> </section> <section id="httpApiConfig" class="config-card hidden" data-astro-cid-doccxbbm> <header class="config-card__header" data-astro-cid-doccxbbm> <div data-astro-cid-doccxbbm> <h4 id="providerName" data-i18n="aiService.remoteTitle" data-astro-cid-doccxbbm>云端 API 服务</h4> <p id="providerInfo" data-i18n="aiService.remoteDescription" data-astro-cid-doccxbbm>
请配置 API 密钥以使用此服务
</p> </div> <span id="httpApiStatus" class="status-badge" data-tone="idle" data-i18n="aiService.statusMissingKey" data-astro-cid-doccxbbm>未配置</span> </header> <div class="config-card__body" data-astro-cid-doccxbbm> <div class="field" data-astro-cid-doccxbbm> <label for="apiKey" data-i18n="aiService.remoteKeyLabel" data-astro-cid-doccxbbm>API 密钥</label> <input type="password" id="apiKey" class="input-control" placeholder="请输入 API 密钥" data-i18n-attrPlaceholder="aiService.remoteKeyPlaceholder" data-astro-cid-doccxbbm> </div> <div class="field" data-astro-cid-doccxbbm> <label for="apiModel" data-i18n="aiService.remoteModelLabel" data-astro-cid-doccxbbm>模型选择</label> <select id="apiModel" class="input-control" data-astro-cid-doccxbbm> <option value="" data-i18n="aiService.remoteModelPlaceholder" data-astro-cid-doccxbbm>请选择模型</option> </select> </div> <div class="field field--deep-agent" data-provider="remote" data-astro-cid-doccxbbm> <div class="deep-agent-header" data-astro-cid-doccxbbm> <span class="deep-agent-title" data-i18n="aiService.deepAgentTitle" data-astro-cid-doccxbbm>深度代理模型映射</span> <label class="deep-agent-toggle" data-astro-cid-doccxbbm> <input type="checkbox" id="remoteDeepAgentEnabled" data-astro-cid-doccxbbm> <span data-i18n="aiService.deepAgentToggle" data-astro-cid-doccxbbm>启用针对该服务的深度代理</span> </label> </div> <div class="deep-agent-grid" id="remoteDeepAgentGrid" data-astro-cid-doccxbbm> <div class="deep-agent-item" data-astro-cid-doccxbbm> <span data-i18n="aiService.deepAgentSearch" data-astro-cid-doccxbbm>搜索阶段</span> <select id="remoteDeepAgentSearch" class="input-control" data-astro-cid-doccxbbm></select> </div> <div class="deep-agent-item" data-astro-cid-doccxbbm> <span data-i18n="aiService.deepAgentModeling" data-astro-cid-doccxbbm>建模阶段</span> <select id="remoteDeepAgentModeling" class="input-control" data-astro-cid-doccxbbm></select> </div> <div class="deep-agent-item" data-astro-cid-doccxbbm> <span data-i18n="aiService.deepAgentReport" data-astro-cid-doccxbbm>报告阶段</span> <select id="remoteDeepAgentReport" class="input-control" data-astro-cid-doccxbbm></select> </div> </div> <p class="deep-agent-hint" id="remoteDeepAgentHint" data-i18n="aiService.deepAgentHint" data-astro-cid-doccxbbm>
留空将沿用上方选择的默认模型。
</p> </div> </div> <footer class="config-card__footer" data-astro-cid-doccxbbm> <button id="testHttpApi" class="action-button" disabled data-i18n="aiService.testButton" data-astro-cid-doccxbbm>测试连接</button> </footer> </section> </div> </div> ${renderScript($$result, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/components/AIServiceSelector.astro?astro&type=script&index=0&lang.ts")} `;
}, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/components/AIServiceSelector.astro", void 0);

var __freeze$2 = Object.freeze;
var __defProp$2 = Object.defineProperty;
var __template$2 = (cooked, raw) => __freeze$2(__defProp$2(cooked, "raw", { value: __freeze$2(raw || cooked.slice()) }));
var _a$2;
const $$SearchConfigPanel = createComponent(async ($$result, $$props, $$slots) => {
  return renderTemplate(_a$2 || (_a$2 = __template$2(["<script type=\"module\">\n  // @ts-nocheck\n  import { SearchAPIClient } from '../lib/search-api-client.js';\n  import CryptoJS from 'crypto-js';\n  \n  // \u7B80\u5316\u7248\u54C8\u5E0C\u51FD\u6570\n  function hashApiKey(key) {\n    return CryptoJS.SHA256(key).toString().substring(0, 16);\n  }\n\n  (() => {\n    'use strict';\n\n    const STORAGE_KEY = 'steady-research-pro:search-config';\n    const storage = typeof window !== 'undefined' ? window.localStorage : null;\n\n    const DEFAULT_AGENT_SETTINGS = {\n      enabled: false,\n      models: {\n        search: '',\n        modeling: '',\n        report: '',\n      },\n      sampling: {\n        temperature: 0.3,\n        topP: 0.85,\n      },\n    };\n\n    const clamp = (value, min, max) => {\n      if (!Number.isFinite(value)) return value;\n      if (typeof min === 'number' && value < min) return min;\n      if (typeof max === 'number' && value > max) return max;\n      return value;\n    };\n\n    const normalizeDeepAgentConfig = config => {\n      const toFiniteNumber = value => {\n        if (typeof value === 'number') {\n          return Number.isFinite(value) ? value : null;\n        }\n        if (typeof value === 'string') {\n          const numeric = Number.parseFloat(value);\n          return Number.isFinite(numeric) ? numeric : null;\n        }\n        return null;\n      };\n\n      const normalized = {\n        enabled: Boolean(config?.enabled),\n        models: {\n          ...DEFAULT_AGENT_SETTINGS.models,\n          ...(config?.models || {}),\n        },\n        sampling: {\n          ...DEFAULT_AGENT_SETTINGS.sampling,\n          ...(config?.sampling || {}),\n        },\n      };\n\n      normalized.models.search = (normalized.models.search || '').trim();\n      normalized.models.modeling = (\n        normalized.models.modeling ||\n        normalized.models.planning ||\n        ''\n      ).trim();\n      normalized.models.report = (normalized.models.report || '').trim();\n\n      const temperature = toFiniteNumber(normalized.sampling.temperature);\n      const topP = toFiniteNumber(normalized.sampling.topP ?? normalized.sampling.top_p);\n\n      normalized.sampling.temperature = clamp(\n        temperature ?? DEFAULT_AGENT_SETTINGS.sampling.temperature,\n        0,\n        2\n      );\n      normalized.sampling.topP = clamp(topP ?? DEFAULT_AGENT_SETTINGS.sampling.topP, 0, 1);\n\n      return normalized;\n    };\n\n    const computeConfigured = (config = {}) => ({\n      bing: Boolean(config.bing),\n      google: Boolean(config.google && config.googleCseId),\n      deepAgent: Boolean(config?.deepAgent?.enabled),\n    });\n\n    const buildConfiguredMessage = (status, fallback = '\u914D\u7F6E\u4FDD\u5B58\u6210\u529F!') => {\n      if (!status) return fallback;\n      const enabled = [];\n      if (status.bing) enabled.push('Bing \u2713');\n      if (status.google) enabled.push('Google \u2713');\n      if (status.deepAgent) enabled.push('\u6DF1\u5EA6\u4EE3\u7406 \u2713');\n      return enabled.length ? `\u5DF2\u8FDE\u63A5: ${enabled.join(' / ')}` : fallback;\n    };\n\n    const readStoredConfig = () => {\n      if (!storage) return null;\n      try {\n        const encrypted = storage.getItem(STORAGE_KEY);\n        if (!encrypted) return null;\n        \n        // \u5C1D\u8BD5\u89E3\u5BC6\u914D\u7F6E\n        const bytes = CryptoJS.AES.decrypt(encrypted, 'steady-research-key');\n        const decrypted = bytes.toString(CryptoJS.enc.Utf8);\n        return decrypted ? JSON.parse(decrypted) : null;\n      } catch (error) {\n        console.warn('\u8BFB\u53D6\u641C\u7D22\u914D\u7F6E\u5931\u8D25:', error);\n        return null;\n      }\n    };\n\n    const writeStoredConfig = config => {\n      if (!storage) return;\n      try {\n        // \u4EC5\u5B58\u50A8\u5BC6\u94A5\u54C8\u5E0C\uFF0C\u4E0D\u5B58\u50A8\u771F\u5B9E\u5BC6\u94A5\n        const safeConfig = {\n          ...config,\n          bing: config.bing ? hashApiKey(config.bing) : '',\n          google: config.google ? hashApiKey(config.google) : '',\n        };\n        // \u4F7F\u7528\u52A0\u5BC6\u5B58\u50A8\u66FF\u4EE3\u660E\u6587\u5B58\u50A8\n        const encrypted = CryptoJS.AES.encrypt(JSON.stringify(safeConfig), 'steady-research-key').toString();\n        storage.setItem(STORAGE_KEY, encrypted);\n      } catch (error) {\n        console.warn('\u4FDD\u5B58\u641C\u7D22\u914D\u7F6E\u5931\u8D25:', error);\n      }\n    };\n\n    const refs = {\n      inputs: {},\n      toggles: {},\n      buttons: {},\n      sections: {},\n      status: null,\n    };\n\n    const el = id => document.getElementById(id);\n\n    const assignRefs = () => {\n      refs.inputs = {\n        bingKey: el('bing-key'),\n        googleKey: el('google-key'),\n        googleCse: el('google-cse'),\n        searchQuery: el('search-query'),\n        searchAgentModel: el('search-agent-model'),\n        modelingAgentModel: el('modeling-agent-model'),\n        reportAgentModel: el('report-agent-model'),\n        agentTemperature: el('agent-temperature'),\n        agentTopP: el('agent-top-p'),\n      };\n\n      refs.toggles = {\n        bing: el('use-bing'),\n        google: el('use-google'),\n        deepAgent: el('use-deep-agent'),\n      };\n\n      refs.buttons = {\n        saveConfig: el('save-config'),\n        testSearch: el('test-search'),\n      };\n\n      refs.sections = {\n        searchResults: el('search-results'),\n        resultsContainer: el('results-container'),\n        agentAdvanced: el('agent-advanced-settings'),\n      };\n\n      refs.status = el('config-status');\n    };\n\n    const searchClient = new SearchAPIClient();\n    let isConfigured = false;\n    let cachedConfig = null;\n    let indicatorSnapshot = { message: '\u5F85\u914D\u7F6E', tone: 'idle' };\n\n    const getValue = input => (input && typeof input.value === 'string' ? input.value.trim() : '');\n    const setDisabled = (node, state) => {\n      if (node) node.disabled = !!state;\n    };\n    const toggleDisplay = (node, show, displayValue = 'block') => {\n      if (!node) return;\n      node.style.display = show ? displayValue : 'none';\n    };\n\n    const parseNumericInput = (input, fallback, bounds = {}) => {\n      if (!input || typeof input.value !== 'string') return fallback;\n      if (!input.value.trim().length) return fallback;\n      const numeric = Number.parseFloat(input.value);\n      if (!Number.isFinite(numeric)) return fallback;\n      return clamp(numeric, bounds.min, bounds.max);\n    };\n\n    const setIndicator = (message, tone = 'idle') => {\n      if (!refs.status) return;\n      refs.status.textContent = message;\n      refs.status.dataset.tone = tone;\n    };\n\n    function showStatus(message, tone = 'idle', { persist = false } = {}) {\n      if (!refs.status) return;\n      if (persist) {\n        indicatorSnapshot = { message, tone };\n        setIndicator(message, tone);\n        return;\n      }\n\n      setIndicator(message || indicatorSnapshot.message, tone);\n      if (tone === 'success' || tone === 'error') {\n        setTimeout(() => {\n          setIndicator(indicatorSnapshot.message, indicatorSnapshot.tone);\n        }, 3000);\n      }\n    }\n\n    const getSelectedEngines = () =>\n      Object.entries(refs.toggles)\n        .filter(([engine, checkbox]) => engine !== 'deepAgent' && checkbox?.checked)\n        .map(([engine]) => engine);\n\n    function updateConfiguredState(config) {\n      const status = computeConfigured(config || {});\n      isConfigured = Boolean(status.bing || status.google);\n      const message = isConfigured ? buildConfiguredMessage(status, '\u5DF2\u914D\u7F6E') : '\u5F85\u914D\u7F6E';\n      const tone = isConfigured ? 'success' : 'idle';\n      showStatus(message, tone, { persist: true });\n    }\n\n    const broadcastConfig = config => {\n      if (typeof window === 'undefined') return;\n      const deepAgent = normalizeDeepAgentConfig(config?.deepAgent);\n      const searchState = {\n        engines: Array.isArray(config?.engines) ? config.engines : [],\n        bing: config?.bing || '',\n        google: config?.google || '',\n        googleCseId: config?.googleCseId || '',\n      };\n\n      window.steadyResearchConfig = window.steadyResearchConfig || {};\n      window.steadyResearchConfig.deepAgent = deepAgent;\n      window.steadyResearchConfig.search = searchState;\n\n      window.dispatchEvent(new CustomEvent('deepAgent:configChanged', { detail: deepAgent }));\n      window.dispatchEvent(new CustomEvent('searchConfig:updated', { detail: searchState }));\n    };\n\n    function hydrateFromConfig(config) {\n      cachedConfig = config || null;\n\n      if (refs.inputs.bingKey) refs.inputs.bingKey.value = config?.bing || '';\n      if (refs.inputs.googleKey) refs.inputs.googleKey.value = config?.google || '';\n      if (refs.inputs.googleCse) refs.inputs.googleCse.value = config?.googleCseId || '';\n      if (refs.inputs.searchQuery && !refs.inputs.searchQuery.value) {\n        refs.inputs.searchQuery.value = '\u4EBA\u5DE5\u667A\u80FD\u884C\u4E1A\u6700\u65B0\u8D8B\u52BF';\n      }\n\n      if (Array.isArray(config?.engines)) {\n        Object.entries(refs.toggles).forEach(([engine, checkbox]) => {\n          if (engine === 'deepAgent') return;\n          if (checkbox) checkbox.checked = config.engines.includes(engine);\n        });\n      } else {\n        Object.entries(refs.toggles).forEach(([engine, checkbox]) => {\n          if (engine === 'deepAgent' || !checkbox) return;\n          checkbox.checked = engine === 'bing';\n        });\n      }\n\n      const deepAgent = normalizeDeepAgentConfig(config?.deepAgent);\n\n      if (refs.toggles.deepAgent) {\n        refs.toggles.deepAgent.checked = deepAgent.enabled;\n      }\n\n      if (refs.inputs.searchAgentModel)\n        refs.inputs.searchAgentModel.value = deepAgent.models.search || '';\n      if (refs.inputs.modelingAgentModel)\n        refs.inputs.modelingAgentModel.value = deepAgent.models.modeling || '';\n      if (refs.inputs.reportAgentModel)\n        refs.inputs.reportAgentModel.value = deepAgent.models.report || '';\n      if (refs.inputs.agentTemperature)\n        refs.inputs.agentTemperature.value = deepAgent.sampling.temperature.toFixed(2);\n      if (refs.inputs.agentTopP) refs.inputs.agentTopP.value = deepAgent.sampling.topP.toFixed(2);\n\n      toggleDisplay(refs.sections.agentAdvanced, deepAgent.enabled);\n\n      broadcastConfig(config);\n      updateConfiguredState(config);\n    }\n\n    function collectAgentOptions() {\n      const enabled = Boolean(refs.toggles.deepAgent?.checked);\n      const models = {\n        search: getValue(refs.inputs.searchAgentModel),\n        modeling: getValue(refs.inputs.modelingAgentModel),\n        report: getValue(refs.inputs.reportAgentModel),\n      };\n      const sampling = {\n        temperature: parseNumericInput(\n          refs.inputs.agentTemperature,\n          DEFAULT_AGENT_SETTINGS.sampling.temperature,\n          { min: 0, max: 2 }\n        ),\n        topP: parseNumericInput(refs.inputs.agentTopP, DEFAULT_AGENT_SETTINGS.sampling.topP, {\n          min: 0,\n          max: 1,\n        }),\n      };\n\n      return normalizeDeepAgentConfig({\n        enabled,\n        models,\n        sampling,\n      });\n    }\n\n    function collectConfig() {\n      return {\n        bing: getValue(refs.inputs.bingKey),\n        google: getValue(refs.inputs.googleKey),\n        googleCseId: getValue(refs.inputs.googleCse),\n        engines: getSelectedEngines(),\n        deepAgent: collectAgentOptions(),\n      };\n    }\n\n    function validateConfigForEngines(config) {\n      const missing = [];\n      if (config.engines.includes('bing') && !config.bing) {\n        missing.push('Bing API \u5BC6\u94A5');\n      }\n      if (config.engines.includes('google')) {\n        if (!config.google) missing.push('Google API \u5BC6\u94A5');\n        if (!config.googleCseId) missing.push('Google CSE ID');\n      }\n      return missing;\n    }\n\n    function saveConfig() {\n      const config = collectConfig();\n      writeStoredConfig(config);\n      hydrateFromConfig(config);\n      showStatus('\u914D\u7F6E\u4FDD\u5B58\u6210\u529F!', 'success');\n    }\n\n    async function testSearch() {\n      const config = collectConfig();\n\n      if (!config.engines.length) {\n        showStatus('\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u641C\u7D22\u5F15\u64CE', 'error');\n        return;\n      }\n\n      const missing = validateConfigForEngines(config);\n      if (missing.length) {\n        showStatus(`\u7F3A\u5C11\u5FC5\u8981\u914D\u7F6E: ${missing.join('\u3001')}`, 'error');\n        return;\n      }\n\n      const query = getValue(refs.inputs.searchQuery);\n      if (!query) {\n        showStatus('\u8BF7\u8F93\u5165\u641C\u7D22\u67E5\u8BE2', 'error');\n        return;\n      }\n\n      showStatus('\u6B63\u5728\u53D1\u8D77\u641C\u7D22...', 'idle');\n      setDisabled(refs.buttons.testSearch, true);\n\n      try {\n        const results = await searchClient.testSearch({\n          query,\n          engines: config.engines,\n          bing: config.bing,\n          google: config.google,\n          googleCseId: config.googleCseId,\n        });\n\n        cachedConfig = config;\n        updateConfiguredState(config);\n        renderResults(results, config.engines);\n        broadcastConfig(config);\n\n        const count = Array.isArray(results) ? results.length : 0;\n        showStatus(`\u641C\u7D22\u5B8C\u6210\uFF0C\u5171\u8FD4\u56DE ${count} \u6761\u7ED3\u679C`, 'success');\n      } catch (error) {\n        const message = error?.message || '\u672A\u77E5\u9519\u8BEF';\n        showStatus(`\u641C\u7D22\u5931\u8D25: ${message}`, 'error');\n      } finally {\n        setDisabled(refs.buttons.testSearch, false);\n      }\n    }\n\n    function renderResults(results, engines) {\n      const container = refs.sections.resultsContainer;\n      if (!container) return;\n\n      const activeEngines =\n        Array.isArray(engines) && engines.length\n          ? engines.map(engine => engine.toUpperCase()).join(' / ')\n          : 'N/A';\n\n      container.innerHTML = '';\n\n      const header = document.createElement('div');\n      header.className = 'results-meta';\n      header.textContent = `ACTIVE ENGINES \xB7 ${activeEngines}`;\n      container.appendChild(header);\n\n      if (!results || !results.length) {\n        container.insertAdjacentHTML('beforeend', '<div class=\"results-empty\">\u6682\u65E0\u7ED3\u679C</div>');\n        toggleDisplay(refs.sections.searchResults, true);\n        return;\n      }\n\n      const fragment = document.createDocumentFragment();\n      results.forEach(item => {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'result-item';\n\n        const title = document.createElement('div');\n        title.className = 'result-title';\n        title.textContent = item.title || '\u65E0\u6807\u9898';\n        wrapper.appendChild(title);\n\n        if (item.snippet) {\n          const snippet = document.createElement('div');\n          snippet.className = 'result-snippet';\n          snippet.textContent = item.snippet;\n          wrapper.appendChild(snippet);\n        }\n\n        if (item.link || item.url) {\n          const link = document.createElement('a');\n          link.href = item.link || item.url;\n          link.target = '_blank';\n          link.rel = 'noopener noreferrer';\n          link.className = 'result-link';\n          link.textContent = '\u8BBF\u95EE';\n          wrapper.appendChild(link);\n        }\n\n        fragment.appendChild(wrapper);\n      });\n\n      container.appendChild(fragment);\n      toggleDisplay(refs.sections.searchResults, true);\n    }\n\n    function init() {\n      assignRefs();\n\n      const stored = readStoredConfig();\n      if (stored) {\n        hydrateFromConfig(stored);\n      } else {\n        updateConfiguredState(null);\n        broadcastConfig({ deepAgent: DEFAULT_AGENT_SETTINGS });\n      }\n\n      toggleDisplay(refs.sections.searchResults, false);\n\n      refs.buttons.saveConfig?.addEventListener('click', saveConfig);\n      refs.buttons.testSearch?.addEventListener('click', testSearch);\n      refs.toggles.deepAgent?.addEventListener('change', () => {\n        const enabled = Boolean(refs.toggles.deepAgent?.checked);\n        toggleDisplay(refs.sections.agentAdvanced, enabled);\n      });\n    }\n\n    if (typeof document === 'undefined') return;\n\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', init);\n    } else {\n      init();\n    }\n  })();\n<\/script> ", '<div class="settings-panel search-config-panel" data-i18n-scope="searchConfig" data-astro-cid-7xm2rgzx> <header class="panel-header" data-astro-cid-7xm2rgzx> <div class="header-meta" data-astro-cid-7xm2rgzx> <span class="badge-soft" data-astro-cid-7xm2rgzx>Search Stack</span> <div class="title" data-astro-cid-7xm2rgzx> <h3 data-astro-cid-7xm2rgzx>\u641C\u7D22 API \u914D\u7F6E</h3> <p data-astro-cid-7xm2rgzx>\u7ED1\u5B9A Bing / Google \u5BC6\u94A5\uFF0C\u9A8C\u8BC1\u68C0\u7D22\u94FE\u8DEF\uFF0C\u5E76\u9884\u914D\u7F6E\u591A\u4EE3\u7406\u53C2\u6570\u3002</p> </div> </div> <span id="config-status" class="status-badge" data-tone="idle" data-astro-cid-7xm2rgzx>\u5F85\u914D\u7F6E</span> </header> <div class="config-grid" data-astro-cid-7xm2rgzx> <section class="config-card" data-astro-cid-7xm2rgzx> <header class="config-card__header" data-astro-cid-7xm2rgzx> <div data-astro-cid-7xm2rgzx> <h4 data-astro-cid-7xm2rgzx>\u641C\u7D22\u670D\u52A1</h4> <p data-astro-cid-7xm2rgzx>\u9009\u62E9\u5F15\u64CE\u5E76\u586B\u5199\u5BF9\u5E94\u7684\u8BBF\u95EE\u5BC6\u94A5\u3002</p> </div> </header> <div class="config-card__body space-y-5" data-astro-cid-7xm2rgzx> <div class="field-group" data-astro-cid-7xm2rgzx> <label class="field-label" data-astro-cid-7xm2rgzx>\u542F\u7528\u7684\u641C\u7D22\u5F15\u64CE</label> <div class="toggle-grid" data-astro-cid-7xm2rgzx> <label class="toggle-pill" data-astro-cid-7xm2rgzx> <input type="checkbox" id="use-bing" data-astro-cid-7xm2rgzx> <span data-astro-cid-7xm2rgzx>Bing Search</span> </label> <label class="toggle-pill" data-astro-cid-7xm2rgzx> <input type="checkbox" id="use-google" data-astro-cid-7xm2rgzx> <span data-astro-cid-7xm2rgzx>Google Programmable Search</span> </label> </div> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="bing-key" data-astro-cid-7xm2rgzx>Bing API Key</label> <input type="password" id="bing-key" class="input-control" placeholder="\u8F93\u5165 Bing API \u5BC6\u94A5" autocomplete="off" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="google-key" data-astro-cid-7xm2rgzx>Google API Key</label> <input type="password" id="google-key" class="input-control" placeholder="\u8F93\u5165 Google API \u5BC6\u94A5" autocomplete="off" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="google-cse" data-astro-cid-7xm2rgzx>Google CSE ID</label> <input type="text" id="google-cse" class="input-control" placeholder="\u8F93\u5165 Google \u81EA\u5B9A\u4E49\u641C\u7D22\u5F15\u64CE ID" autocomplete="off" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="search-query" data-astro-cid-7xm2rgzx>\u6D4B\u8BD5\u67E5\u8BE2</label> <input type="text" id="search-query" class="input-control" placeholder="\u4F8B\u5982\uFF1A\u65B0\u80FD\u6E90\u6C7D\u8F66\u5E02\u573A\u683C\u5C40" data-astro-cid-7xm2rgzx> <p class="field-hint" data-astro-cid-7xm2rgzx>\u4FDD\u5B58\u914D\u7F6E\u540E\u53EF\u8F93\u5165\u5173\u952E\u8BCD\u8FDB\u884C\u4E00\u6B21\u5FEB\u901F\u641C\u7D22\u9A8C\u8BC1\u3002</p> </div> </div> <footer class="config-card__footer" data-astro-cid-7xm2rgzx> <div class="footer-actions" data-astro-cid-7xm2rgzx> <button id="save-config" class="action-button" data-astro-cid-7xm2rgzx>\u4FDD\u5B58\u914D\u7F6E</button> <button id="test-search" class="action-button action-button--ghost" data-astro-cid-7xm2rgzx>\u6D4B\u8BD5\u641C\u7D22</button> </div> </footer> </section> <section class="config-card" data-astro-cid-7xm2rgzx> <header class="config-card__header" data-astro-cid-7xm2rgzx> <div data-astro-cid-7xm2rgzx> <h4 data-astro-cid-7xm2rgzx>\u6DF1\u5EA6\u4EE3\u7406\u9ED8\u8BA4\u503C</h4> <p data-astro-cid-7xm2rgzx>\u4E3A SearchAgent / ModelingAgent / ReportAgent \u9884\u8BBE\u6A21\u578B\u4E0E\u91C7\u6837\u53C2\u6570\u3002</p> </div> <label class="toggle-pill toggle-pill--inline" data-astro-cid-7xm2rgzx> <input type="checkbox" id="use-deep-agent" data-astro-cid-7xm2rgzx> <span data-astro-cid-7xm2rgzx>\u542F\u7528\u6DF1\u5EA6\u4EE3\u7406</span> </label> </header> <div class="config-card__body space-y-4" data-astro-cid-7xm2rgzx> <div id="agent-advanced-settings" style="display:none;" class="space-y-4" data-astro-cid-7xm2rgzx> <div class="field-grid" data-astro-cid-7xm2rgzx> <div class="field" data-astro-cid-7xm2rgzx> <label for="search-agent-model" data-astro-cid-7xm2rgzx>SearchAgent \u6A21\u578B</label> <input type="text" id="search-agent-model" class="input-control" placeholder="\u5982\uFF1Allama3:8b" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="modeling-agent-model" data-astro-cid-7xm2rgzx>ModelingAgent \u6A21\u578B</label> <input type="text" id="modeling-agent-model" class="input-control" placeholder="\u5982\uFF1Allama3:8b" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="report-agent-model" data-astro-cid-7xm2rgzx>ReportAgent \u6A21\u578B</label> <input type="text" id="report-agent-model" class="input-control" placeholder="\u5982\uFF1Allama3:70b" data-astro-cid-7xm2rgzx> </div> </div> <div class="field-grid" data-astro-cid-7xm2rgzx> <div class="field" data-astro-cid-7xm2rgzx> <label for="agent-temperature" data-astro-cid-7xm2rgzx>Temperature</label> <input type="number" step="0.05" min="0" max="2" id="agent-temperature" class="input-control" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="agent-top-p" data-astro-cid-7xm2rgzx>Top P</label> <input type="number" step="0.01" min="0" max="1" id="agent-top-p" class="input-control" data-astro-cid-7xm2rgzx> </div> </div> <p class="field-hint" data-astro-cid-7xm2rgzx>\u4E0A\u8FF0\u914D\u7F6E\u4F1A\u6CE8\u5165\u5230\u6BCF\u6B21\u7814\u7A76\u8BF7\u6C42\uFF0C\u53EF\u5728\u5355\u6B21\u4EFB\u52A1\u5185\u8986\u76D6\u3002</p> </div> <p class="field-hint muted" data-astro-cid-7xm2rgzx>\u672A\u542F\u7528\u65F6\uFF0C\u7CFB\u7EDF\u5C06\u56DE\u9000\u5230\u73B0\u6709\u7684\u4E94\u6BB5\u5F0F\u7814\u7A76\u6D41\u7A0B\u3002</p> </div> </section> </div> <section id="search-results" class="config-card search-results-card" style="display:none;" data-astro-cid-7xm2rgzx> <header class="config-card__header" data-astro-cid-7xm2rgzx> <div data-astro-cid-7xm2rgzx> <h4 data-astro-cid-7xm2rgzx>\u641C\u7D22\u7ED3\u679C\u9884\u89C8</h4> <p data-astro-cid-7xm2rgzx>\u5C55\u793A\u6700\u8FD1\u4E00\u6B21\u6D4B\u8BD5\u8C03\u7528\u7684\u8FD4\u56DE\u6570\u636E\u3002</p> </div> </header> <div class="config-card__body results-body" id="results-container" data-astro-cid-7xm2rgzx></div> </section> </div> '], ["<script type=\"module\">\n  // @ts-nocheck\n  import { SearchAPIClient } from '../lib/search-api-client.js';\n  import CryptoJS from 'crypto-js';\n  \n  // \u7B80\u5316\u7248\u54C8\u5E0C\u51FD\u6570\n  function hashApiKey(key) {\n    return CryptoJS.SHA256(key).toString().substring(0, 16);\n  }\n\n  (() => {\n    'use strict';\n\n    const STORAGE_KEY = 'steady-research-pro:search-config';\n    const storage = typeof window !== 'undefined' ? window.localStorage : null;\n\n    const DEFAULT_AGENT_SETTINGS = {\n      enabled: false,\n      models: {\n        search: '',\n        modeling: '',\n        report: '',\n      },\n      sampling: {\n        temperature: 0.3,\n        topP: 0.85,\n      },\n    };\n\n    const clamp = (value, min, max) => {\n      if (!Number.isFinite(value)) return value;\n      if (typeof min === 'number' && value < min) return min;\n      if (typeof max === 'number' && value > max) return max;\n      return value;\n    };\n\n    const normalizeDeepAgentConfig = config => {\n      const toFiniteNumber = value => {\n        if (typeof value === 'number') {\n          return Number.isFinite(value) ? value : null;\n        }\n        if (typeof value === 'string') {\n          const numeric = Number.parseFloat(value);\n          return Number.isFinite(numeric) ? numeric : null;\n        }\n        return null;\n      };\n\n      const normalized = {\n        enabled: Boolean(config?.enabled),\n        models: {\n          ...DEFAULT_AGENT_SETTINGS.models,\n          ...(config?.models || {}),\n        },\n        sampling: {\n          ...DEFAULT_AGENT_SETTINGS.sampling,\n          ...(config?.sampling || {}),\n        },\n      };\n\n      normalized.models.search = (normalized.models.search || '').trim();\n      normalized.models.modeling = (\n        normalized.models.modeling ||\n        normalized.models.planning ||\n        ''\n      ).trim();\n      normalized.models.report = (normalized.models.report || '').trim();\n\n      const temperature = toFiniteNumber(normalized.sampling.temperature);\n      const topP = toFiniteNumber(normalized.sampling.topP ?? normalized.sampling.top_p);\n\n      normalized.sampling.temperature = clamp(\n        temperature ?? DEFAULT_AGENT_SETTINGS.sampling.temperature,\n        0,\n        2\n      );\n      normalized.sampling.topP = clamp(topP ?? DEFAULT_AGENT_SETTINGS.sampling.topP, 0, 1);\n\n      return normalized;\n    };\n\n    const computeConfigured = (config = {}) => ({\n      bing: Boolean(config.bing),\n      google: Boolean(config.google && config.googleCseId),\n      deepAgent: Boolean(config?.deepAgent?.enabled),\n    });\n\n    const buildConfiguredMessage = (status, fallback = '\u914D\u7F6E\u4FDD\u5B58\u6210\u529F!') => {\n      if (!status) return fallback;\n      const enabled = [];\n      if (status.bing) enabled.push('Bing \u2713');\n      if (status.google) enabled.push('Google \u2713');\n      if (status.deepAgent) enabled.push('\u6DF1\u5EA6\u4EE3\u7406 \u2713');\n      return enabled.length ? \\`\u5DF2\u8FDE\u63A5: \\${enabled.join(' / ')}\\` : fallback;\n    };\n\n    const readStoredConfig = () => {\n      if (!storage) return null;\n      try {\n        const encrypted = storage.getItem(STORAGE_KEY);\n        if (!encrypted) return null;\n        \n        // \u5C1D\u8BD5\u89E3\u5BC6\u914D\u7F6E\n        const bytes = CryptoJS.AES.decrypt(encrypted, 'steady-research-key');\n        const decrypted = bytes.toString(CryptoJS.enc.Utf8);\n        return decrypted ? JSON.parse(decrypted) : null;\n      } catch (error) {\n        console.warn('\u8BFB\u53D6\u641C\u7D22\u914D\u7F6E\u5931\u8D25:', error);\n        return null;\n      }\n    };\n\n    const writeStoredConfig = config => {\n      if (!storage) return;\n      try {\n        // \u4EC5\u5B58\u50A8\u5BC6\u94A5\u54C8\u5E0C\uFF0C\u4E0D\u5B58\u50A8\u771F\u5B9E\u5BC6\u94A5\n        const safeConfig = {\n          ...config,\n          bing: config.bing ? hashApiKey(config.bing) : '',\n          google: config.google ? hashApiKey(config.google) : '',\n        };\n        // \u4F7F\u7528\u52A0\u5BC6\u5B58\u50A8\u66FF\u4EE3\u660E\u6587\u5B58\u50A8\n        const encrypted = CryptoJS.AES.encrypt(JSON.stringify(safeConfig), 'steady-research-key').toString();\n        storage.setItem(STORAGE_KEY, encrypted);\n      } catch (error) {\n        console.warn('\u4FDD\u5B58\u641C\u7D22\u914D\u7F6E\u5931\u8D25:', error);\n      }\n    };\n\n    const refs = {\n      inputs: {},\n      toggles: {},\n      buttons: {},\n      sections: {},\n      status: null,\n    };\n\n    const el = id => document.getElementById(id);\n\n    const assignRefs = () => {\n      refs.inputs = {\n        bingKey: el('bing-key'),\n        googleKey: el('google-key'),\n        googleCse: el('google-cse'),\n        searchQuery: el('search-query'),\n        searchAgentModel: el('search-agent-model'),\n        modelingAgentModel: el('modeling-agent-model'),\n        reportAgentModel: el('report-agent-model'),\n        agentTemperature: el('agent-temperature'),\n        agentTopP: el('agent-top-p'),\n      };\n\n      refs.toggles = {\n        bing: el('use-bing'),\n        google: el('use-google'),\n        deepAgent: el('use-deep-agent'),\n      };\n\n      refs.buttons = {\n        saveConfig: el('save-config'),\n        testSearch: el('test-search'),\n      };\n\n      refs.sections = {\n        searchResults: el('search-results'),\n        resultsContainer: el('results-container'),\n        agentAdvanced: el('agent-advanced-settings'),\n      };\n\n      refs.status = el('config-status');\n    };\n\n    const searchClient = new SearchAPIClient();\n    let isConfigured = false;\n    let cachedConfig = null;\n    let indicatorSnapshot = { message: '\u5F85\u914D\u7F6E', tone: 'idle' };\n\n    const getValue = input => (input && typeof input.value === 'string' ? input.value.trim() : '');\n    const setDisabled = (node, state) => {\n      if (node) node.disabled = !!state;\n    };\n    const toggleDisplay = (node, show, displayValue = 'block') => {\n      if (!node) return;\n      node.style.display = show ? displayValue : 'none';\n    };\n\n    const parseNumericInput = (input, fallback, bounds = {}) => {\n      if (!input || typeof input.value !== 'string') return fallback;\n      if (!input.value.trim().length) return fallback;\n      const numeric = Number.parseFloat(input.value);\n      if (!Number.isFinite(numeric)) return fallback;\n      return clamp(numeric, bounds.min, bounds.max);\n    };\n\n    const setIndicator = (message, tone = 'idle') => {\n      if (!refs.status) return;\n      refs.status.textContent = message;\n      refs.status.dataset.tone = tone;\n    };\n\n    function showStatus(message, tone = 'idle', { persist = false } = {}) {\n      if (!refs.status) return;\n      if (persist) {\n        indicatorSnapshot = { message, tone };\n        setIndicator(message, tone);\n        return;\n      }\n\n      setIndicator(message || indicatorSnapshot.message, tone);\n      if (tone === 'success' || tone === 'error') {\n        setTimeout(() => {\n          setIndicator(indicatorSnapshot.message, indicatorSnapshot.tone);\n        }, 3000);\n      }\n    }\n\n    const getSelectedEngines = () =>\n      Object.entries(refs.toggles)\n        .filter(([engine, checkbox]) => engine !== 'deepAgent' && checkbox?.checked)\n        .map(([engine]) => engine);\n\n    function updateConfiguredState(config) {\n      const status = computeConfigured(config || {});\n      isConfigured = Boolean(status.bing || status.google);\n      const message = isConfigured ? buildConfiguredMessage(status, '\u5DF2\u914D\u7F6E') : '\u5F85\u914D\u7F6E';\n      const tone = isConfigured ? 'success' : 'idle';\n      showStatus(message, tone, { persist: true });\n    }\n\n    const broadcastConfig = config => {\n      if (typeof window === 'undefined') return;\n      const deepAgent = normalizeDeepAgentConfig(config?.deepAgent);\n      const searchState = {\n        engines: Array.isArray(config?.engines) ? config.engines : [],\n        bing: config?.bing || '',\n        google: config?.google || '',\n        googleCseId: config?.googleCseId || '',\n      };\n\n      window.steadyResearchConfig = window.steadyResearchConfig || {};\n      window.steadyResearchConfig.deepAgent = deepAgent;\n      window.steadyResearchConfig.search = searchState;\n\n      window.dispatchEvent(new CustomEvent('deepAgent:configChanged', { detail: deepAgent }));\n      window.dispatchEvent(new CustomEvent('searchConfig:updated', { detail: searchState }));\n    };\n\n    function hydrateFromConfig(config) {\n      cachedConfig = config || null;\n\n      if (refs.inputs.bingKey) refs.inputs.bingKey.value = config?.bing || '';\n      if (refs.inputs.googleKey) refs.inputs.googleKey.value = config?.google || '';\n      if (refs.inputs.googleCse) refs.inputs.googleCse.value = config?.googleCseId || '';\n      if (refs.inputs.searchQuery && !refs.inputs.searchQuery.value) {\n        refs.inputs.searchQuery.value = '\u4EBA\u5DE5\u667A\u80FD\u884C\u4E1A\u6700\u65B0\u8D8B\u52BF';\n      }\n\n      if (Array.isArray(config?.engines)) {\n        Object.entries(refs.toggles).forEach(([engine, checkbox]) => {\n          if (engine === 'deepAgent') return;\n          if (checkbox) checkbox.checked = config.engines.includes(engine);\n        });\n      } else {\n        Object.entries(refs.toggles).forEach(([engine, checkbox]) => {\n          if (engine === 'deepAgent' || !checkbox) return;\n          checkbox.checked = engine === 'bing';\n        });\n      }\n\n      const deepAgent = normalizeDeepAgentConfig(config?.deepAgent);\n\n      if (refs.toggles.deepAgent) {\n        refs.toggles.deepAgent.checked = deepAgent.enabled;\n      }\n\n      if (refs.inputs.searchAgentModel)\n        refs.inputs.searchAgentModel.value = deepAgent.models.search || '';\n      if (refs.inputs.modelingAgentModel)\n        refs.inputs.modelingAgentModel.value = deepAgent.models.modeling || '';\n      if (refs.inputs.reportAgentModel)\n        refs.inputs.reportAgentModel.value = deepAgent.models.report || '';\n      if (refs.inputs.agentTemperature)\n        refs.inputs.agentTemperature.value = deepAgent.sampling.temperature.toFixed(2);\n      if (refs.inputs.agentTopP) refs.inputs.agentTopP.value = deepAgent.sampling.topP.toFixed(2);\n\n      toggleDisplay(refs.sections.agentAdvanced, deepAgent.enabled);\n\n      broadcastConfig(config);\n      updateConfiguredState(config);\n    }\n\n    function collectAgentOptions() {\n      const enabled = Boolean(refs.toggles.deepAgent?.checked);\n      const models = {\n        search: getValue(refs.inputs.searchAgentModel),\n        modeling: getValue(refs.inputs.modelingAgentModel),\n        report: getValue(refs.inputs.reportAgentModel),\n      };\n      const sampling = {\n        temperature: parseNumericInput(\n          refs.inputs.agentTemperature,\n          DEFAULT_AGENT_SETTINGS.sampling.temperature,\n          { min: 0, max: 2 }\n        ),\n        topP: parseNumericInput(refs.inputs.agentTopP, DEFAULT_AGENT_SETTINGS.sampling.topP, {\n          min: 0,\n          max: 1,\n        }),\n      };\n\n      return normalizeDeepAgentConfig({\n        enabled,\n        models,\n        sampling,\n      });\n    }\n\n    function collectConfig() {\n      return {\n        bing: getValue(refs.inputs.bingKey),\n        google: getValue(refs.inputs.googleKey),\n        googleCseId: getValue(refs.inputs.googleCse),\n        engines: getSelectedEngines(),\n        deepAgent: collectAgentOptions(),\n      };\n    }\n\n    function validateConfigForEngines(config) {\n      const missing = [];\n      if (config.engines.includes('bing') && !config.bing) {\n        missing.push('Bing API \u5BC6\u94A5');\n      }\n      if (config.engines.includes('google')) {\n        if (!config.google) missing.push('Google API \u5BC6\u94A5');\n        if (!config.googleCseId) missing.push('Google CSE ID');\n      }\n      return missing;\n    }\n\n    function saveConfig() {\n      const config = collectConfig();\n      writeStoredConfig(config);\n      hydrateFromConfig(config);\n      showStatus('\u914D\u7F6E\u4FDD\u5B58\u6210\u529F!', 'success');\n    }\n\n    async function testSearch() {\n      const config = collectConfig();\n\n      if (!config.engines.length) {\n        showStatus('\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u641C\u7D22\u5F15\u64CE', 'error');\n        return;\n      }\n\n      const missing = validateConfigForEngines(config);\n      if (missing.length) {\n        showStatus(\\`\u7F3A\u5C11\u5FC5\u8981\u914D\u7F6E: \\${missing.join('\u3001')}\\`, 'error');\n        return;\n      }\n\n      const query = getValue(refs.inputs.searchQuery);\n      if (!query) {\n        showStatus('\u8BF7\u8F93\u5165\u641C\u7D22\u67E5\u8BE2', 'error');\n        return;\n      }\n\n      showStatus('\u6B63\u5728\u53D1\u8D77\u641C\u7D22...', 'idle');\n      setDisabled(refs.buttons.testSearch, true);\n\n      try {\n        const results = await searchClient.testSearch({\n          query,\n          engines: config.engines,\n          bing: config.bing,\n          google: config.google,\n          googleCseId: config.googleCseId,\n        });\n\n        cachedConfig = config;\n        updateConfiguredState(config);\n        renderResults(results, config.engines);\n        broadcastConfig(config);\n\n        const count = Array.isArray(results) ? results.length : 0;\n        showStatus(\\`\u641C\u7D22\u5B8C\u6210\uFF0C\u5171\u8FD4\u56DE \\${count} \u6761\u7ED3\u679C\\`, 'success');\n      } catch (error) {\n        const message = error?.message || '\u672A\u77E5\u9519\u8BEF';\n        showStatus(\\`\u641C\u7D22\u5931\u8D25: \\${message}\\`, 'error');\n      } finally {\n        setDisabled(refs.buttons.testSearch, false);\n      }\n    }\n\n    function renderResults(results, engines) {\n      const container = refs.sections.resultsContainer;\n      if (!container) return;\n\n      const activeEngines =\n        Array.isArray(engines) && engines.length\n          ? engines.map(engine => engine.toUpperCase()).join(' / ')\n          : 'N/A';\n\n      container.innerHTML = '';\n\n      const header = document.createElement('div');\n      header.className = 'results-meta';\n      header.textContent = \\`ACTIVE ENGINES \xB7 \\${activeEngines}\\`;\n      container.appendChild(header);\n\n      if (!results || !results.length) {\n        container.insertAdjacentHTML('beforeend', '<div class=\"results-empty\">\u6682\u65E0\u7ED3\u679C</div>');\n        toggleDisplay(refs.sections.searchResults, true);\n        return;\n      }\n\n      const fragment = document.createDocumentFragment();\n      results.forEach(item => {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'result-item';\n\n        const title = document.createElement('div');\n        title.className = 'result-title';\n        title.textContent = item.title || '\u65E0\u6807\u9898';\n        wrapper.appendChild(title);\n\n        if (item.snippet) {\n          const snippet = document.createElement('div');\n          snippet.className = 'result-snippet';\n          snippet.textContent = item.snippet;\n          wrapper.appendChild(snippet);\n        }\n\n        if (item.link || item.url) {\n          const link = document.createElement('a');\n          link.href = item.link || item.url;\n          link.target = '_blank';\n          link.rel = 'noopener noreferrer';\n          link.className = 'result-link';\n          link.textContent = '\u8BBF\u95EE';\n          wrapper.appendChild(link);\n        }\n\n        fragment.appendChild(wrapper);\n      });\n\n      container.appendChild(fragment);\n      toggleDisplay(refs.sections.searchResults, true);\n    }\n\n    function init() {\n      assignRefs();\n\n      const stored = readStoredConfig();\n      if (stored) {\n        hydrateFromConfig(stored);\n      } else {\n        updateConfiguredState(null);\n        broadcastConfig({ deepAgent: DEFAULT_AGENT_SETTINGS });\n      }\n\n      toggleDisplay(refs.sections.searchResults, false);\n\n      refs.buttons.saveConfig?.addEventListener('click', saveConfig);\n      refs.buttons.testSearch?.addEventListener('click', testSearch);\n      refs.toggles.deepAgent?.addEventListener('change', () => {\n        const enabled = Boolean(refs.toggles.deepAgent?.checked);\n        toggleDisplay(refs.sections.agentAdvanced, enabled);\n      });\n    }\n\n    if (typeof document === 'undefined') return;\n\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', init);\n    } else {\n      init();\n    }\n  })();\n<\/script> ", '<div class="settings-panel search-config-panel" data-i18n-scope="searchConfig" data-astro-cid-7xm2rgzx> <header class="panel-header" data-astro-cid-7xm2rgzx> <div class="header-meta" data-astro-cid-7xm2rgzx> <span class="badge-soft" data-astro-cid-7xm2rgzx>Search Stack</span> <div class="title" data-astro-cid-7xm2rgzx> <h3 data-astro-cid-7xm2rgzx>\u641C\u7D22 API \u914D\u7F6E</h3> <p data-astro-cid-7xm2rgzx>\u7ED1\u5B9A Bing / Google \u5BC6\u94A5\uFF0C\u9A8C\u8BC1\u68C0\u7D22\u94FE\u8DEF\uFF0C\u5E76\u9884\u914D\u7F6E\u591A\u4EE3\u7406\u53C2\u6570\u3002</p> </div> </div> <span id="config-status" class="status-badge" data-tone="idle" data-astro-cid-7xm2rgzx>\u5F85\u914D\u7F6E</span> </header> <div class="config-grid" data-astro-cid-7xm2rgzx> <section class="config-card" data-astro-cid-7xm2rgzx> <header class="config-card__header" data-astro-cid-7xm2rgzx> <div data-astro-cid-7xm2rgzx> <h4 data-astro-cid-7xm2rgzx>\u641C\u7D22\u670D\u52A1</h4> <p data-astro-cid-7xm2rgzx>\u9009\u62E9\u5F15\u64CE\u5E76\u586B\u5199\u5BF9\u5E94\u7684\u8BBF\u95EE\u5BC6\u94A5\u3002</p> </div> </header> <div class="config-card__body space-y-5" data-astro-cid-7xm2rgzx> <div class="field-group" data-astro-cid-7xm2rgzx> <label class="field-label" data-astro-cid-7xm2rgzx>\u542F\u7528\u7684\u641C\u7D22\u5F15\u64CE</label> <div class="toggle-grid" data-astro-cid-7xm2rgzx> <label class="toggle-pill" data-astro-cid-7xm2rgzx> <input type="checkbox" id="use-bing" data-astro-cid-7xm2rgzx> <span data-astro-cid-7xm2rgzx>Bing Search</span> </label> <label class="toggle-pill" data-astro-cid-7xm2rgzx> <input type="checkbox" id="use-google" data-astro-cid-7xm2rgzx> <span data-astro-cid-7xm2rgzx>Google Programmable Search</span> </label> </div> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="bing-key" data-astro-cid-7xm2rgzx>Bing API Key</label> <input type="password" id="bing-key" class="input-control" placeholder="\u8F93\u5165 Bing API \u5BC6\u94A5" autocomplete="off" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="google-key" data-astro-cid-7xm2rgzx>Google API Key</label> <input type="password" id="google-key" class="input-control" placeholder="\u8F93\u5165 Google API \u5BC6\u94A5" autocomplete="off" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="google-cse" data-astro-cid-7xm2rgzx>Google CSE ID</label> <input type="text" id="google-cse" class="input-control" placeholder="\u8F93\u5165 Google \u81EA\u5B9A\u4E49\u641C\u7D22\u5F15\u64CE ID" autocomplete="off" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="search-query" data-astro-cid-7xm2rgzx>\u6D4B\u8BD5\u67E5\u8BE2</label> <input type="text" id="search-query" class="input-control" placeholder="\u4F8B\u5982\uFF1A\u65B0\u80FD\u6E90\u6C7D\u8F66\u5E02\u573A\u683C\u5C40" data-astro-cid-7xm2rgzx> <p class="field-hint" data-astro-cid-7xm2rgzx>\u4FDD\u5B58\u914D\u7F6E\u540E\u53EF\u8F93\u5165\u5173\u952E\u8BCD\u8FDB\u884C\u4E00\u6B21\u5FEB\u901F\u641C\u7D22\u9A8C\u8BC1\u3002</p> </div> </div> <footer class="config-card__footer" data-astro-cid-7xm2rgzx> <div class="footer-actions" data-astro-cid-7xm2rgzx> <button id="save-config" class="action-button" data-astro-cid-7xm2rgzx>\u4FDD\u5B58\u914D\u7F6E</button> <button id="test-search" class="action-button action-button--ghost" data-astro-cid-7xm2rgzx>\u6D4B\u8BD5\u641C\u7D22</button> </div> </footer> </section> <section class="config-card" data-astro-cid-7xm2rgzx> <header class="config-card__header" data-astro-cid-7xm2rgzx> <div data-astro-cid-7xm2rgzx> <h4 data-astro-cid-7xm2rgzx>\u6DF1\u5EA6\u4EE3\u7406\u9ED8\u8BA4\u503C</h4> <p data-astro-cid-7xm2rgzx>\u4E3A SearchAgent / ModelingAgent / ReportAgent \u9884\u8BBE\u6A21\u578B\u4E0E\u91C7\u6837\u53C2\u6570\u3002</p> </div> <label class="toggle-pill toggle-pill--inline" data-astro-cid-7xm2rgzx> <input type="checkbox" id="use-deep-agent" data-astro-cid-7xm2rgzx> <span data-astro-cid-7xm2rgzx>\u542F\u7528\u6DF1\u5EA6\u4EE3\u7406</span> </label> </header> <div class="config-card__body space-y-4" data-astro-cid-7xm2rgzx> <div id="agent-advanced-settings" style="display:none;" class="space-y-4" data-astro-cid-7xm2rgzx> <div class="field-grid" data-astro-cid-7xm2rgzx> <div class="field" data-astro-cid-7xm2rgzx> <label for="search-agent-model" data-astro-cid-7xm2rgzx>SearchAgent \u6A21\u578B</label> <input type="text" id="search-agent-model" class="input-control" placeholder="\u5982\uFF1Allama3:8b" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="modeling-agent-model" data-astro-cid-7xm2rgzx>ModelingAgent \u6A21\u578B</label> <input type="text" id="modeling-agent-model" class="input-control" placeholder="\u5982\uFF1Allama3:8b" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="report-agent-model" data-astro-cid-7xm2rgzx>ReportAgent \u6A21\u578B</label> <input type="text" id="report-agent-model" class="input-control" placeholder="\u5982\uFF1Allama3:70b" data-astro-cid-7xm2rgzx> </div> </div> <div class="field-grid" data-astro-cid-7xm2rgzx> <div class="field" data-astro-cid-7xm2rgzx> <label for="agent-temperature" data-astro-cid-7xm2rgzx>Temperature</label> <input type="number" step="0.05" min="0" max="2" id="agent-temperature" class="input-control" data-astro-cid-7xm2rgzx> </div> <div class="field" data-astro-cid-7xm2rgzx> <label for="agent-top-p" data-astro-cid-7xm2rgzx>Top P</label> <input type="number" step="0.01" min="0" max="1" id="agent-top-p" class="input-control" data-astro-cid-7xm2rgzx> </div> </div> <p class="field-hint" data-astro-cid-7xm2rgzx>\u4E0A\u8FF0\u914D\u7F6E\u4F1A\u6CE8\u5165\u5230\u6BCF\u6B21\u7814\u7A76\u8BF7\u6C42\uFF0C\u53EF\u5728\u5355\u6B21\u4EFB\u52A1\u5185\u8986\u76D6\u3002</p> </div> <p class="field-hint muted" data-astro-cid-7xm2rgzx>\u672A\u542F\u7528\u65F6\uFF0C\u7CFB\u7EDF\u5C06\u56DE\u9000\u5230\u73B0\u6709\u7684\u4E94\u6BB5\u5F0F\u7814\u7A76\u6D41\u7A0B\u3002</p> </div> </section> </div> <section id="search-results" class="config-card search-results-card" style="display:none;" data-astro-cid-7xm2rgzx> <header class="config-card__header" data-astro-cid-7xm2rgzx> <div data-astro-cid-7xm2rgzx> <h4 data-astro-cid-7xm2rgzx>\u641C\u7D22\u7ED3\u679C\u9884\u89C8</h4> <p data-astro-cid-7xm2rgzx>\u5C55\u793A\u6700\u8FD1\u4E00\u6B21\u6D4B\u8BD5\u8C03\u7528\u7684\u8FD4\u56DE\u6570\u636E\u3002</p> </div> </header> <div class="config-card__body results-body" id="results-container" data-astro-cid-7xm2rgzx></div> </section> </div> '])), maybeRenderHead());
}, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/components/SearchConfigPanel.astro", void 0);

var __freeze$1 = Object.freeze;
var __defProp$1 = Object.defineProperty;
var __template$1 = (cooked, raw) => __freeze$1(__defProp$1(cooked, "raw", { value: __freeze$1(cooked.slice()) }));
var _a$1;
const $$LanguageSwitcher = createComponent(($$result, $$props, $$slots) => {
  return renderTemplate(_a$1 || (_a$1 = __template$1(["", `<div class="language-switcher glass-card glass-card--muted rounded-2xl border border-white/10 px-4 py-3 text-xs text-slate-200/90" data-astro-cid-a2mxz4y6> <div class="flex items-center justify-between gap-3" data-astro-cid-a2mxz4y6> <div class="space-y-0.5" data-astro-cid-a2mxz4y6> <p class="text-[11px] uppercase tracking-[0.32em] text-slate-400" data-i18n="languageSwitcher.label" data-astro-cid-a2mxz4y6>
界面语言
</p> <p class="text-[11px] text-slate-400/80" data-i18n="common.language" data-astro-cid-a2mxz4y6>语言</p> </div> <div class="inline-flex items-center gap-1 rounded-full bg-white/5 p-1" role="group" aria-label="Language selector" data-astro-cid-a2mxz4y6> <button type="button" class="lang-btn" data-locale="zh-CN" data-i18n="languageSwitcher.zh" data-astro-cid-a2mxz4y6>简体中文</button> <button type="button" class="lang-btn" data-locale="en-US" data-i18n="languageSwitcher.en" data-astro-cid-a2mxz4y6>English</button> </div> </div> </div>  <script type="module">
  const initLanguageSwitcher = () => {
    const i18n = window.__steadyI18n;
    if (!i18n) {
      requestAnimationFrame(initLanguageSwitcher);
      return;
    }

    const { getLocale, setLocale, onLocaleChange, applyTranslations } = i18n;
    const buttons = Array.from(document.querySelectorAll('.language-switcher .lang-btn'));

    const updateActiveButton = locale => {
      buttons.forEach(button => {
        const target = button?.dataset?.locale;
        const isActive = target === locale;
        button.dataset.active = isActive ? 'true' : 'false';
        button.setAttribute('aria-pressed', String(isActive));
      });
    };

    const handleClick = event => {
      const button = event.currentTarget;
      const locale = button?.dataset?.locale;
      if (!locale) return;
      setLocale(locale);
    };

    buttons.forEach(button => {
      button.addEventListener('click', handleClick);
    });

    const unsubscribe = onLocaleChange?.(locale => {
      updateActiveButton(locale);
    });

    updateActiveButton(getLocale?.() || 'zh-CN');

    if (import.meta.hot) {
      import.meta.hot.dispose(() => {
        buttons.forEach(button => button.removeEventListener('click', handleClick));
        unsubscribe?.();
      });
    }
  };

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initLanguageSwitcher, { once: true });
  } else {
    initLanguageSwitcher();
  }
</script>`])), maybeRenderHead());
}, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/components/LanguageSwitcher.astro", void 0);

const i18nModuleUrl = "/_astro/i18n.DYlRO84j.js";

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(cooked.slice()) }));
var _a;
const $$Astro = createAstro();
const $$Index = createComponent(($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$Index;
  return renderTemplate(_a || (_a = __template(['<html lang="zh-CN" class="h-full" data-astro-cid-j7pv25f6> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title data-i18n="layout.title">Steady Research Pro</title><meta name="description" content="Deep Research Agent - \u591A\u6E90\u805A\u5408\u667A\u80FD\u7814\u7A76\u754C\u9762"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">', '<script type="module"', "><\/script>", '</head> <body class="min-h-screen text-slate-100 antialiased" data-astro-cid-j7pv25f6> <div class="flex min-h-screen" data-astro-cid-j7pv25f6> <aside class="relative w-80 flex-shrink-0 bg-slate-950/70 border-r border-white/5 px-7 py-10 backdrop-blur-2xl" data-astro-cid-j7pv25f6> <div class="absolute inset-y-10 right-0 w-px bg-gradient-to-b from-transparent via-white/20 to-transparent opacity-60" data-astro-cid-j7pv25f6></div> <div class="space-y-9" data-astro-cid-j7pv25f6> <div class="space-y-3" data-astro-cid-j7pv25f6> <span class="badge-soft" data-i18n="layout.researchControlBadge" data-astro-cid-j7pv25f6>Research Control</span> <div data-astro-cid-j7pv25f6> <h1 class="text-2xl font-semibold text-white tracking-tight" data-i18n="layout.title" data-astro-cid-j7pv25f6>\nSteady Research Pro\n</h1> <p class="text-sm text-slate-400/90 mt-1" data-i18n="layout.subtitle" data-astro-cid-j7pv25f6>\nDeep Research Agent Suite\n</p> </div> </div> <div class="glass-card glass-card--muted rounded-2xl px-4 py-5 text-[11px] leading-5 text-slate-300/90" data-astro-cid-j7pv25f6> <p class="font-semibold text-slate-100/90" data-i18n="layout.quickTipTitle" data-astro-cid-j7pv25f6>\n\u5B9E\u65F6\u4FDD\u6301\u7814\u7A76\u4E0A\u4E0B\u6587\n</p> <p class="mt-1 text-slate-300/80" data-i18n="layout.quickTipDescription" data-astro-cid-j7pv25f6>\n\u5728 Settings \u4E2D\u914D\u7F6E\u6A21\u578B\u540E\uFF0C\u53EF\u4E00\u6B21\u5B8C\u6210\u89C4\u5212\u3001\u641C\u7D22\u3001\u805A\u5408\u4E0E\u603B\u7ED3\u3002\n</p> <div class="subtle-divider my-4" data-astro-cid-j7pv25f6></div> <div class="flex items-center justify-between text-[10px] uppercase tracking-[0.18em] text-slate-500" data-astro-cid-j7pv25f6> <span data-i18n="layout.betaVersion" data-astro-cid-j7pv25f6>Beta build 0.3.2</span> <span data-i18n="layout.betaYear" data-astro-cid-j7pv25f6>2025</span> </div> </div> ', ' <nav class="space-y-2" data-astro-cid-j7pv25f6> <button type="button" class="sidebar-link" data-target="research" data-astro-cid-j7pv25f6> <span class="indicator" data-astro-cid-j7pv25f6></span> <span class="icon-wrap" aria-hidden="true" data-astro-cid-j7pv25f6> <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24" data-astro-cid-j7pv25f6><path stroke-linecap="round" stroke-linejoin="round" d="M3 7l9-4 9 4-9 4-9-4v10l9 4 9-4V7" data-astro-cid-j7pv25f6></path></svg> </span> <span class="label" data-astro-cid-j7pv25f6> <span class="text" data-i18n="navigation.research" data-astro-cid-j7pv25f6>Research \u4EEA\u8868\u76D8</span> <span class="hint" data-i18n="navigation.researchHint" data-astro-cid-j7pv25f6>Agent workflow</span> </span> <span class="kbd" data-astro-cid-j7pv25f6>R</span> </button> <button type="button" class="sidebar-link" data-target="settings" data-astro-cid-j7pv25f6> <span class="indicator" data-astro-cid-j7pv25f6></span> <span class="icon-wrap" aria-hidden="true" data-astro-cid-j7pv25f6> <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.6" viewBox="0 0 24 24" data-astro-cid-j7pv25f6><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3a1.5 1.5 0 012.5 0l.61.93a1.5 1.5 0 001.28.67h1.12a1.5 1.5 0 011.41 2.06l-.44 1.2a1.5 1.5 0 000 .98l.44 1.2a1.5 1.5 0 01-1.41 2.06h-1.12a1.5 1.5 0 00-1.28.67l-.61.93a1.5 1.5 0 01-2.5 0l-.61-.93a1.5 1.5 0 00-1.28-.67H6.75a1.5 1.5 0 01-1.41-2.06l.44-1.2a1.5 1.5 0 000-.98l-.44-1.2A1.5 1.5 0 016.75 5.6h1.12a1.5 1.5 0 001.28-.67l.6-.93z" data-astro-cid-j7pv25f6></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" data-astro-cid-j7pv25f6></path></svg> </span> <span class="label" data-astro-cid-j7pv25f6> <span class="text" data-i18n="navigation.settings" data-astro-cid-j7pv25f6>Settings \u8BBE\u7F6E</span> <span class="hint" data-i18n="navigation.settingsHint" data-astro-cid-j7pv25f6>Providers &amp; \u641C\u7D22</span> </span> <span class="kbd" data-astro-cid-j7pv25f6>S</span> </button> </nav> </div> </aside> <main class="relative flex-1 overflow-hidden" data-astro-cid-j7pv25f6> <div class="absolute inset-0" data-astro-cid-j7pv25f6> <div class="visual-grid-overlay" data-astro-cid-j7pv25f6></div> <div class="floating-noise" data-astro-cid-j7pv25f6></div> <div class="absolute -top-28 -left-40 h-[26rem] w-[26rem] rounded-full bg-emerald-500/20 blur-[140px]" data-astro-cid-j7pv25f6></div> <div class="absolute top-40 -right-24 h-[22rem] w-[22rem] rounded-full bg-indigo-500/20 blur-[160px]" data-astro-cid-j7pv25f6></div> </div> <div class="relative z-10" data-astro-cid-j7pv25f6> <div class="max-w-6xl mx-auto px-8 py-12 space-y-12" data-astro-cid-j7pv25f6> <header class="space-y-4" data-astro-cid-j7pv25f6> <div class="flex flex-wrap items-center gap-3" data-astro-cid-j7pv25f6> <span class="badge-soft" data-i18n="layout.researchBadge" data-astro-cid-j7pv25f6>Multi-source intelligence</span> <span class="text-[11px] uppercase tracking-[0.32em] text-slate-500" data-i18n="layout.researchSse" data-astro-cid-j7pv25f6>SSE streaming ready</span> </div> <div class="flex flex-col gap-3" data-astro-cid-j7pv25f6> <h2 class="text-3xl font-semibold text-white tracking-tight" data-i18n="layout.researchHeadline" data-astro-cid-j7pv25f6>\n\u591A\u6E90\u667A\u80FD\u7814\u7A76\u5DE5\u4F5C\u53F0\n</h2> <p class="text-sm text-slate-300/90 max-w-2xl" data-i18n="layout.researchDescription" data-astro-cid-j7pv25f6>\n\u4ECE\u6A21\u578B\u8C03\u5EA6\u5230\u641C\u7D22\u805A\u5408\uFF0C\u5168\u7A0B\u53EF\u89C6\u5316\u7814\u7A76\u6D41\u7A0B\u3002\u901A\u8FC7\u81EA\u5B9A\u4E49\u4E8B\u4EF6\u9A71\u52A8\u7684 UI\n                  \u5916\u58F3\uFF0C\u5B9E\u65F6\u611F\u77E5\u7814\u7A76\u72B6\u6001\u3002\n</p> </div> <div class="grid gap-4 sm:grid-cols-3" data-astro-cid-j7pv25f6> <div class="glass-card rounded-2xl px-4 py-5" data-astro-cid-j7pv25f6> <p class="text-[11px] uppercase tracking-[0.22em] text-slate-400" data-i18n="layout.researchPlannerLabel" data-astro-cid-j7pv25f6>\nPlanner\n</p> <p class="mt-2 text-lg font-semibold text-white" data-i18n="layout.researchPlannerValue" data-astro-cid-j7pv25f6>\n5-stage pipeline\n</p> <p class="mt-1 text-xs text-slate-300/80" data-i18n="layout.researchPlannerHint" data-astro-cid-j7pv25f6>\nPlan \u2192 Search \u2192 Extract \u2192 Cluster \u2192 Synthesis\n</p> </div> <div class="glass-card rounded-2xl px-4 py-5" data-astro-cid-j7pv25f6> <p class="text-[11px] uppercase tracking-[0.22em] text-slate-400" data-i18n="layout.researchLatencyLabel" data-astro-cid-j7pv25f6>\nLatency\n</p> <p class="mt-2 text-lg font-semibold text-white" data-i18n="layout.researchLatencyValue" data-astro-cid-j7pv25f6>\n42s avg\n</p> <p class="mt-1 text-xs text-slate-300/80" data-i18n="layout.researchLatencyHint" data-astro-cid-j7pv25f6>\n\u57FA\u4E8E\u6700\u8FD1 10 \u6B21\u7814\u7A76\u7684\u5E73\u5747\u503C\n</p> </div> <div class="glass-card rounded-2xl px-4 py-5" data-astro-cid-j7pv25f6> <p class="text-[11px] uppercase tracking-[0.22em] text-slate-400" data-i18n="layout.researchSourcesLabel" data-astro-cid-j7pv25f6>\nSources\n</p> <p class="mt-2 text-lg font-semibold text-white" data-i18n="layout.researchSourcesValue" data-astro-cid-j7pv25f6>\n8 providers\n</p> <p class="mt-1 text-xs text-slate-300/80" data-i18n="layout.researchSourcesHint" data-astro-cid-j7pv25f6>\n\u652F\u6301\u672C\u5730 Ollama \u4E0E\u4E3B\u6D41\u4E91\u7AEF API\n</p> </div> </div> </header> <section class="page-panel space-y-8" data-page="research" data-astro-cid-j7pv25f6> ', ' </section> <section class="page-panel space-y-8 hidden" data-page="settings" data-astro-cid-j7pv25f6> ', " ", ' </section> <footer class="pt-6 text-center text-xs text-slate-500/80" data-i18n="layout.footer" data-astro-cid-j7pv25f6>\n\xA9 2025 Steady Research Pro \xB7 Crafted with Astro &amp; Tailwind\n</footer> </div> </div> </main> </div> ', "  </body> </html>"])), renderScript($$result, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/pages/index.astro?astro&type=script&index=0&lang.ts"), addAttribute(i18nModuleUrl, "src"), renderHead(), renderComponent($$result, "LanguageSwitcher", $$LanguageSwitcher, { "data-astro-cid-j7pv25f6": true }), renderComponent($$result, "ResearchAgentUI", $$ResearchAgentUI, { "data-astro-cid-j7pv25f6": true }), renderComponent($$result, "AIServiceSelector", $$AIServiceSelector, { "data-astro-cid-j7pv25f6": true }), renderComponent($$result, "SearchConfigPanel", $$SearchConfigPanel, { "data-astro-cid-j7pv25f6": true }), renderScript($$result, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/pages/index.astro?astro&type=script&index=1&lang.ts"));
}, "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/pages/index.astro", void 0);

const $$file = "D:/Onlinebiz/zerox/gridsfeed/backs/srp/Steady-Research-Pro-main/src/pages/index.astro";
const $$url = "";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$Index,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
