<!DOCTYPE html><html lang="zh-CN"> <head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.14.3"><title>Astro + Tailwind CSS + Ollama AI</title><link rel="stylesheet" href="/_astro/chat.DgxYJ8JE.css"></head> <body class="bg-gray-100 text-gray-900 min-h-screen"> <div class="container mx-auto px-4 py-8"> <!-- 标题部分 --> <div class="text-center mb-8"> <h1 class="text-4xl font-bold text-blue-600 mb-4">
Astro + Tailwind CSS + Ollama AI
</h1> <p class="text-lg text-gray-600 max-w-2xl mx-auto">
这是一个集成了 Astro.js、Tailwind CSS 和 Ollama AI 的现代 Web 应用程序。
          你可以在下方与 AI 进行实时对话。
</p> </div> <!-- 功能状态 --> <div class="grid md:grid-cols-3 gap-6 mb-8"> <div class="bg-white rounded-lg shadow-md p-6 text-center"> <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"> <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path> </svg> </div> <h3 class="text-lg font-semibold mb-2">Astro.js</h3> <p class="text-gray-600 text-sm">现代静态网站生成器</p> </div> <div class="bg-white rounded-lg shadow-md p-6 text-center"> <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"> <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a4 4 0 004-4V5z"></path> </svg> </div> <h3 class="text-lg font-semibold mb-2">Tailwind CSS</h3> <p class="text-gray-600 text-sm">实用优先的 CSS 框架</p> </div> <div class="bg-white rounded-lg shadow-md p-6 text-center"> <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4"> <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path> </svg> </div> <h3 class="text-lg font-semibold mb-2">Ollama AI</h3> <p class="text-gray-600 text-sm">本地 AI 模型服务</p> </div> </div> <!-- 聊天界面 --> <div id="chat-container" class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg"> <!-- 聊天标题 --> <div class="bg-blue-600 text-white p-4 rounded-t-lg"> <h2 class="text-xl font-bold">Ollama AI 聊天</h2> <div class="flex items-center mt-2"> <span class="text-sm">模型:</span> <select id="model-select" class="ml-2 bg-blue-500 text-white border-none rounded px-2 py-1 text-sm"> <option value="">加载中...</option> </select> <div id="status-indicator" class="ml-4 flex items-center"> <div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div> <span class="text-sm">连接中...</span> </div> </div> </div> <!-- 聊天消息区域 --> <div id="messages-container" class="h-96 overflow-y-auto p-4 space-y-4"> <div class="text-center text-gray-500"> <p>欢迎使用 Ollama AI 聊天！请输入您的消息开始对话。</p> </div> </div> <!-- 输入区域 --> <div class="border-t p-4"> <div class="flex space-x-2"> <input id="message-input" type="text" placeholder="输入您的消息..." class="flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" disabled> <button id="send-button" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400" disabled>
发送
</button> </div> </div> </div> <script type="module">class o{constructor(){this.messagesContainer=document.getElementById("messages-container"),this.messageInput=document.getElementById("message-input"),this.sendButton=document.getElementById("send-button"),this.modelSelect=document.getElementById("model-select"),this.statusIndicator=document.getElementById("status-indicator"),this.init()}async init(){await this.loadModels(),this.setupEventListeners(),this.checkOllamaStatus()}async loadModels(){try{const a=await(await fetch("/api/models")).json();if(this.modelSelect.innerHTML="",a.success&&a.models.length>0)a.models.forEach(t=>{const s=document.createElement("option");s.value=t.name,s.textContent=t.name,this.modelSelect.appendChild(s)}),this.modelSelect.selectedIndex=0;else{const t=document.createElement("option");t.value="",t.textContent="无可用模型",this.modelSelect.appendChild(t)}}catch(e){console.error("加载模型失败:",e),this.modelSelect.innerHTML='<option value="">加载失败</option>'}}async checkOllamaStatus(){try{(await(await fetch("/api/models")).json()).success?(this.updateStatus(!0,"已连接"),this.messageInput.disabled=!1,this.sendButton.disabled=!1):(this.updateStatus(!1,"连接失败"),this.messageInput.disabled=!0,this.sendButton.disabled=!0)}catch{this.updateStatus(!1,"连接失败"),this.messageInput.disabled=!0,this.sendButton.disabled=!0}}updateStatus(e,a){const t=this.statusIndicator.querySelector("div"),s=this.statusIndicator.querySelector("span");t.className=`w-2 h-2 rounded-full mr-2 ${e?"bg-green-500":"bg-red-500"}`,s.textContent=a}setupEventListeners(){this.sendButton.addEventListener("click",()=>this.sendMessage()),this.messageInput.addEventListener("keypress",e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),this.sendMessage())})}async sendMessage(){const e=this.messageInput.value.trim(),a=this.modelSelect.value;if(!e||!a)return;this.addMessage(e,"user"),this.messageInput.value="";const t=this.addMessage("AI 正在思考...","ai",!0);try{const n=await(await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,model:a})})).json();t.remove(),n.success?this.addMessage(n.data,"ai"):this.addMessage(`错误: ${n.error}`,"error")}catch(s){t.remove(),this.addMessage(`网络错误: ${s.message}`,"error")}}addMessage(e,a,t=!1){const s=document.createElement("div");s.className=`flex ${a==="user"?"justify-end":"justify-start"}`;let n,i;switch(a){case"user":n="bg-blue-600",i="text-white";break;case"ai":n="bg-gray-200",i="text-gray-800";break;case"error":n="bg-red-100",i="text-red-800";break;default:n="bg-gray-100",i="text-gray-800"}return s.innerHTML=`
        <div class="${n} ${i} rounded-lg p-3 max-w-xs lg:max-w-md ${t?"animate-pulse":""}">
          <pre class="whitespace-pre-wrap text-sm">${e}</pre>
        </div>
      `,this.messagesContainer.appendChild(s),this.messagesContainer.scrollTop=this.messagesContainer.scrollHeight,s}}document.addEventListener("DOMContentLoaded",()=>{new o});</script> <!-- 使用说明 --> <div class="mt-8 bg-white rounded-lg shadow-md p-6"> <h2 class="text-xl font-semibold mb-4">使用说明</h2> <div class="grid md:grid-cols-2 gap-6"> <div> <h3 class="font-semibold mb-2">准备工作</h3> <ul class="space-y-1 text-sm text-gray-600"> <li>• 确保已安装 Ollama</li> <li>• 运行 <code class="bg-gray-100 px-1 rounded">ollama serve</code></li> <li>• 下载模型：<code class="bg-gray-100 px-1 rounded">ollama pull llama2</code></li> </ul> </div> <div> <h3 class="font-semibold mb-2">功能特性</h3> <ul class="space-y-1 text-sm text-gray-600"> <li>• 实时 AI 对话</li> <li>• 多模型支持</li> <li>• 响应式界面</li> <li>• 连接状态监控</li> </ul> </div> </div> </div> </div> </body></html>